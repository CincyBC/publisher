# Development Plan (2025-04-30) - PR #48 Review Follow-up

1.  [x] **Address Review Comments & Verify View Support:**
    *   [x] **Logging Consistency (`packages/server/src/service/package.ts`):** Remove `console.log` statements with `[ Debug]` prefix. Align logging with project conventions.
    *   [x] **Restore Service-Level View Logic (`packages/server/src/service/model.ts`):** Re-add the code block identified in review for extracting `views`.
    *   [x] **Verify MCP View Handling (Code Review):**
        *   [x] Check `view_resource.ts` handler uses restored view data correctly.
        *   [x] Check `package_resource.ts` contents handler includes views.
        *   [x] Check `execute_query_tool.ts` handler accepts and processes `viewName` parameter.
    *   [ ] **Verify MCP View Handling (Tests):** Review tests in `mcp_resource.integration.spec.ts` and `mcp_execute_query_tool.integration.spec.ts` for view coverage (retrieval, listing, execution).
    *   [x] **Remove Dead Code:** Delete `packages/server/src/service/package.service.base.ts` and `packages/server/src/service/package.service.ours.ts`.
2.  [ ] **Update Local `main` Branch:**
    *   [ ] Run `git fetch origin` to update `origin/main`.
3.  [ ] **Rebase Feature Branch:**
    *   [ ] Checkout `add-mcp-server` branch.
    *   [ ] Run `git rebase origin/main`.
    *   [ ] Resolve any merge conflicts.
4.  [ ] **Apply Code Changes & Run Tests:**
    *   [x] Implement code changes from Step 1 (logging, view logic restore, dead code deletion).
    *   [ ] Run MCP tests: `bun test packages/server/src/__tests__/mcp_*.spec.ts`.
    *   [ ] Ensure all MCP tests pass.
5.  [ ] **Commit and Push:**
    *   [x] Commit the fixes.
    *   [ ] Force-push updated branch to fork: `git push --force-with-lease origin add-mcp-server`. 